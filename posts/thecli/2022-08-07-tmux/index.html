<!doctype html><html lang=en data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>利器1: Oh, My Tmux - fgg blog</title>
<meta name=description content="键盘驱动(为主)的工作流"><link rel=icon type=image/x-icon href=https://fgg100y.github.io/favicon.ico><link rel=apple-touch-icon-precomposed href=https://fgg100y.github.io/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://fgg100y.github.io/css/style.min.b4d24af3f8cf20d1698a5b809c35d6912485c2ea8bee514632a7b387676076bd.css integrity="sha256-tNJK8/jPINFpiluAnDXWkSSFwuqL7lFGMqezh2dgdr0="><link rel=stylesheet href=https://fgg100y.github.io/css/style.min.31d1662db6dd546a5622c56e7095ebbe00b4974b957a58b42c47937a98a3a611.css integrity="sha256-MdFmLbbdVGpWIsVucJXrvgC0l0uVeli0LEeTepijphE="><link rel=stylesheet href=https://fgg100y.github.io/css/style.min.159579eb91bf655c726d836d5df3d31b773597682769d2ccf74f0ce820296522.css integrity="sha256-FZV565G/ZVxybYNtXfPTG3c1l2gnadLM908M6CApZSI="><script src=https://fgg100y.github.io/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><div class=header-top-left><h1 class="site-title noselect"><a href=/>fgg blog</a></h1><div class=theme-switcher><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun-high" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828A4 4 0 109.172 9.172a4 4 0 005.656 5.656z"/><path d="M6.343 17.657l-1.414 1.414"/><path d="M6.343 6.343 4.929 4.929"/><path d="M17.657 6.343l1.414-1.414"/><path d="M17.657 17.657l1.414 1.414"/><path d="M4 12H2"/><path d="M12 4V2"/><path d="M20 12h2"/><path d="M12 20v2"/></svg></span></div><script>const STORAGE_KEY="user-color-scheme",defaultTheme="auto";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeGiscusTheme(currentTheme)};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme==="auto"?(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)):document.documentElement.setAttribute("data-theme",currentTheme),switchButton&&switchButton.addEventListener("click",switchTheme,!1),showContent()});function detectCurrentScheme(){return localStorage!==null&&localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function switchTheme(){currentTheme=currentTheme==="dark"?"light":"dark",localStorage&&localStorage.setItem(STORAGE_KEY,currentTheme),document.documentElement.setAttribute("data-theme",currentTheme),changeGiscusTheme(currentTheme)}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}function changeGiscusTheme(e){function t(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}t({setConfig:{theme:e}})}</script><ul class=social-icons><li><a href=https://github.com/fgg100y title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></span></a></li><li><a href=https://fgg100y.github.io/index.xml title=RSS rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></span></a></li></ul></div><div class=header-top-right></div></div><nav class=noselect><a href=https://fgg100y.github.io/ title>Home</a>
<a href=https://fgg100y.github.io/posts/ title>Posts</a>
<a href=https://fgg100y.github.io/tags/ title>Tags</a>
<a href=https://fgg100y.github.io/about/ title>About</a></nav><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">利器1: Oh, My Tmux</h1></header><div class="post-info noselect"><a class="post-hidden-url u-url" href=https://fgg100y.github.io/posts/thecli/2022-08-07-tmux/>https://fgg100y.github.io/posts/thecli/2022-08-07-tmux/</a>
<a href=https://fgg100y.github.io/ class="p-name p-author post-hidden-author h-card" rel=me>fmh</a><div class=post-taxonomies></div></div></div><details class="toc noselect"><summary>Table of Contents</summary><div class=inner><nav id=TableOfContents><ul><li><a href=#tmuxhttpsgithubcomtmuxtmux><a href=https://github.com/tmux/tmux>Tmux</a></a></li><li><a href=#tmux-的一些关键配置>Tmux 的一些关键配置</a></li><li><a href=#默认快捷键修改-ctrl-b---ctrl-a>默认快捷键修改: Ctrl-b -> Ctrl-a</a></li><li><a href=#vimtmux-强强组合>vim/tmux 强强组合</a></li><li><a href=#主题背景颜色切换>主题背景颜色切换</a></li><li><a href=#关于配置和插件以及管理插件的插件>关于配置和插件以及管理插件的插件</a></li></ul></nav></div></details><script>var toc=document.querySelector(".toc");toc&&toc.addEventListener("click",function(){event.target.tagName!=="A"&&(event.preventDefault(),this.open?(this.open=!1,this.classList.remove("expanded")):(this.open=!0,this.classList.add("expanded")))})</script><div class="content e-content"><h2 id=tmuxhttpsgithubcomtmuxtmux><div><a href=#tmuxhttpsgithubcomtmuxtmux>#
</a><a href=https://github.com/tmux/tmux>Tmux</a></div></h2><p><a href=https://github.com/tmux/tmux>Tmux</a> 是一个终端多路复用器<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>：&mldr;</p><blockquote><p>Tmux is a terminal multiplexer: it enables a number of terminals to be
created, accessed, and controlled from a single screen. tmux may be detached
from a screen and continue running in the background, then later reattached.</p></blockquote><p>那到底什么是<ruby>“终端”<rt>terminal</rt></ruby>？<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> 我回答不了这个问题，但我发现了一个很好的解释 &ndash;
<a href=https://unix.stackexchange.com/questions/4126/what-is-the-exact-difference-between-a-terminal-a-shell-a-tty-and-a-con>terminal</a></p><p>突然想起《统计学》关于“卡方检验”那一章的经典导语：</p><blockquote><p>不要问它的含义，宁可问如何使用它。&ndash; 维特根斯坦</p></blockquote><p>本着“拿来主义”精神，那就来粗略看看 Tmux 能如何使用吧：</p><p><img alt="IMG_MyTmux &ndash; (gif 失效)" src=/img/posts/tmux/ssr_myTmuxDemo.gif></p><ol><li><p>启动 Termainal (CTRL+Enter, 这是个人定义的快捷键)</p></li><li><p>启动 Tmux 进入我的工作环境 (须知：我这里展示的不是初始化的 Tmux 启动)</p></li><li><p>检查一下昨天写的博客写到哪里了 (貌似差不多了，写其他内容)</p></li><li><p>切换到下一场“会话”(session) &ndash; vimwiki (这里是我个人项目根目录)</p></li><li><p>按进度今天应该介绍一下 Tmux 这个工具 (然后，就到这里了)</p></li><li><p>现在阳光明媚（过一会儿就变毒辣），白天还是换到白色背景合适些</p></li><li><p><del>搬砖滴干活咯各位</del><br><del>嗯，干活？更像是创作</del><br><del>创作？这算哪门子的&mldr;</del><br>所以还是，干点活吧 ：）</p></li></ol><hr><h2 id=tmux-的一些关键配置><div><a href=#tmux-%e7%9a%84%e4%b8%80%e4%ba%9b%e5%85%b3%e9%94%ae%e9%85%8d%e7%bd%ae>#
</a>Tmux 的一些关键配置</div></h2><p>如果还没有安装 Tmux，命令行中安装起来也不费事 (Debian系列)：<code>apt install tmux</code></p><p>以下的内容均围绕 <code>~/.tmux.conf</code> 文件展开。如果没有就自己创建一个这文件。
默认这些代码框里的内容（等宽字体那些）是要添加到 <code>~/.tmux.conf</code> 文件里。</p><p>&ldquo;#&rdquo; 开头的语句是注释说明<br>&ldquo;$&rdquo; 开头的语句是要在命令行运行的命令<br>&ldquo;:command&rdquo; 以“冒号接命令名”开头的语句是要在vim命令模式运行的命令</p><h2 id=默认快捷键修改-ctrl-b---ctrl-a><div><a href=#%e9%bb%98%e8%ae%a4%e5%bf%ab%e6%8d%b7%e9%94%ae%e4%bf%ae%e6%94%b9-ctrl-b---ctrl-a>#
</a>默认快捷键修改: Ctrl-b -> Ctrl-a</div></h2><p>Tmux 的默认快捷键是 <code>ctrl-b</code>，这在键盘上距离略微有点远 (对于我的短手指来说)，
因此我把它修改为 <code>ctrl-a</code> 组合键。</p><p>将下面语句加入 .tmux.conf 文件：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ff5c57>set</span> -g prefix C-a
</span></span><span style=display:flex><span><span style=color:#78787e># # unbind the C-b</span>
</span></span><span style=display:flex><span>unbind C-b
</span></span><span style=display:flex><span><span style=color:#78787e># # ensure that we can send Ctrl-a to other apps (e.g., vim)</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>bind</span> C-a send-prefix
</span></span><span style=display:flex><span><span style=color:#78787e># # setting the delay between prefix and command</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>set</span> -s escape-time <span style=color:#ff9f43>1</span>
</span></span></code></pre></div><p>既然是要用快捷键，那么重新加载 .tmux.conf 文件的自然也安排上：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#78787e># reload the .tmux.conf file with Prefix-r</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>bind</span> r source-file ~/.tmux.conf <span style=color:#5af78e>\;</span> display <span style=color:#5af78e>&#34;tmuxconf reloaded!&#34;</span>
</span></span></code></pre></div><p>然后，在命令行直接输入快捷组合键：<code>Ctrl+a+r</code> 即可使配置生效 (<code>+</code>号的意思是同时摁下)。</p><h2 id=vimtmux-强强组合><div><a href=#vimtmux-%e5%bc%ba%e5%bc%ba%e7%bb%84%e5%90%88>#
</a>vim/tmux 强强组合</div></h2><p>Tmux 支持多个终端窗格 (terminal panes)，每个窗格都是独立的终端，
因此，最明显的事情就是，你可以同时在一块屏幕上“监控”多个不同任务，意思是，
这些不同的任务在视觉上是“同时”呈现的（相对于重叠的 标签页(tab) 而言）。</p><p>如果你恰好也喜欢用 vim 进行码字，也打开了 vim 编辑器 (vim 本身也有窗格功能)，
自然而然的，你肯定想以相同的快捷键来实现不同的 vim/tmux 窗格之间的切换。</p><p>幸运的是，已经有人实现了这样的功能，并共享了，这就是
<a href=https://github.com/christoomey/vim-tmux-navigator>vim-tmux-navigator</a>.</p><p>vim 有丰富的插件生态，这是 vim 强大生命力的一个体现。
这么好的模式，自然值得借鉴。因此，tmux 也有一个用来管理插件的
<a href=https://github.com/tmux-plugins/tpm>tpm</a>.</p><p>需要在 vim 和 tmux 两个方面进行配置：</p><ol><li>在 vim 方面, 将以下语句加入 .vimrc 文件：</li></ol><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#78787e># 如果你用的是 Vim-Plug 插件管理器的话</span>
</span></span><span style=display:flex><span>Plug <span style=color:#5af78e>&#39;christoomey/vim-tmux-navigator&#39;</span>
</span></span></code></pre></div><p>然后运行 <code>:PlugInstall</code> 来安装这个插件。</p><p>如果你是第一次配置 vim 插件，先去了解
<a href=https://github.com/junegunn/vim-plug>Vim-Plug</a>.</p><ol start=2><li>在 tmux 方面，将下面语句加入 .tmux.conf 文件：</li></ol><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#78787e># tpm is a tmux-plugin manager.  [details in its github repos]</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>set</span> -g @plugin <span style=color:#5af78e>&#39;tmux-plugins/tpm&#39;</span>
</span></span><span style=display:flex><span><span style=color:#78787e># vim-tmux-navigator: Seamless navigation between tmux panes and vim splits</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>set</span> -g @plugin <span style=color:#5af78e>&#39;christoomey/vim-tmux-navigator&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e># put this &#39;run&#39; command to the very end of .tmux.conf, says the tpm&#39;s readme</span>
</span></span><span style=display:flex><span>run <span style=color:#5af78e>&#39;~/.tmux/plugins/tpm/tpm&#39;</span>
</span></span></code></pre></div><p>加入这些内容之后，重新加载 tmux 环境, (在已经启动tmux的命令行运行以下命令)：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ tmux <span style=color:#ff5c57>source</span> ~/.tmux.conf
</span></span></code></pre></div><h2 id=主题背景颜色切换><div><a href=#%e4%b8%bb%e9%a2%98%e8%83%8c%e6%99%af%e9%a2%9c%e8%89%b2%e5%88%87%e6%8d%a2>#
</a>主题背景颜色切换</div></h2><p>在我的印象里，感觉黑色/暗色系一下子成了很多应用软件的默认背景色，
我在命令行过活很多年了，对此很是习惯，个人很少看到谁的Terminal是白色背景的。
主要应该是：1）配置了白天黑夜都友好的主题；2）不当回事儿。
但有时候，特别是光线充足的时候，我比较喜欢白色的背景。
所以，我需要能随心所欲切换背景色调。</p><p>这个貌似没法不依赖于外部脚本来实现，至少我没有发现可行的办法。因此，你也需要
<a href=https://www.seanh.cc/2021/01/02/change-between-light-and-dark-themes-in-tmux/>去下载这个脚本</a></p><p>Linux 环境氛围是这样的，不要盲目相信别人写的脚本，特别是那些你不认识的人。
相信开源和相信陌生人，毕竟不是同一件事。
意思就是，你在使用这些脚本之前好歹也要看看人家到底写了什么吧。
特别是这种都不超过一页内容的脚本。</p><p>什么？你说你看不懂。事实是，没有人在一开始就什么都看得懂。比如说，
你看到脚本里有这么一句类似于windows上“清理垃圾”的命令： <code>sudo rm -rf /*</code>，
那你就要保持警惕了。
据说，有些系统会阻止你这么干，但有些系统会“开心地”执行你的旨意；
反正我没试过，我也没有以任何方式暗示或鼓励你要这么清理系统垃圾。</p><p>如果说你下载了那个脚本，放到你喜欢它待的位置，比如说， <code>~/.tmux/bin/</code>，
然后将下面这条语句加入 <code>~/.tmux.conf</code> 文件中。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#ff5c57>bind</span> T run-shell ~/.tmux/bin/toggle-theme
</span></span></code></pre></div><hr><h2 id=关于配置和插件以及管理插件的插件><div><a href=#%e5%85%b3%e4%ba%8e%e9%85%8d%e7%bd%ae%e5%92%8c%e6%8f%92%e4%bb%b6%e4%bb%a5%e5%8f%8a%e7%ae%a1%e7%90%86%e6%8f%92%e4%bb%b6%e7%9a%84%e6%8f%92%e4%bb%b6>#
</a>关于配置和插件以及管理插件的插件</div></h2><p>以上内容分别对应着：</p><p>1）直接对 tmux 进行基本配置；</p><p>2）使用 tmux 插件管理器对 tmux 进行配置；</p><p>3）借用 脚本程序 对 tmux 进行配置。</p><p>毕竟，不是每个人都热衷于使用插件管理器，插件和主件之间的交互方式并不设限。你可以选择使用你觉得合适的方法来完成任务。
要是觉得现有的都不满意，无法满足你的特殊需求，手痒痒的，那就自己搞一个。
很多优秀的软件都是如此，它提供足够好的默认值，但也提供足够多的灵活性，让用户有的选。</p><p>刘建明说“以前没的选，现在想选回做好人，给个机会”，陈永仁答“去同法官讲”。“有的选”这一点十分可贵。</p><hr><p>Last update: 2024-07-04</p><blockquote><p>USER: Tmux 是什么？
GPT4o: Tmux 是一个终端多路复用器 (terminal multiplexer)，允许用户在一个终端窗口内运行和管理多
个终端会话。它提供了一种方便的方法来分割一个物理终端窗口成多个虚拟终端，并在这些虚拟终端
之间自由切换。Tmux 的主要功能包括：</p><ul><li>会话管理：Tmux 可以创建、分离和重新附加会话，使用户可以在不同的终端会话之间快速切换。</li><li>窗口分割：用户可以在一个Tmux会话中将窗口分割成多个窗格，每个窗格可以独立运行一个命令行程序。</li><li>持久性：即使终端窗口关闭，Tmux 会话仍然会保持运行，这样用户可以稍后重新附加会话，继续工作。</li><li>可定制性：Tmux 提供了丰富的配置选项和快捷键，用户可以根据自己的需求进行定制。</li></ul></blockquote><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>而如今，或许应该问问GPT4o&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>想知道怎么像这样标注名词吗？去看看<a href=https://www.junyi.dev/posts/a-writing-trick/>这篇博文</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/regressionmodels/linear_regression/>Linear Regression: frequentist & bayesian</a></div><div class="right pagination-item disabled"></div></div></main><footer class="common-footer noselect"><div class=common-footer-bottom><div style=display:flex;align-items:center;gap:8px>© fmh, 2024</div><div>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/Junyi-99/hugo-theme-anubis2>Anubis2</a>.<br></div></div><p class="h-card vcard"><a href=https://fgg100y.github.io/ class="p-name u-url url fn" rel=me>fmh</a></p></footer></div></body></html>