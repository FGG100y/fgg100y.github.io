<!doctype html><html lang=en data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>python_module - fgg blog</title>
<meta name=description content="

    
        #
    
    Layout of Python installations


All paths in the table are relative to the installation root:



Files
Windows
Linux and macOS
Notes




Interpreter
python.exe
bin/python3.x



Standard library
Lib and DLLs
lib/python3.x
Extension modules are located under DLLs on Windows.  Fedora places the standard library under lib64 instead of lib.


Third-party packages
Lib\site-packages
lib/python3.x/site-packages
Debian and Ubuntu put packages in dist-packages.  Fedora places extension modules under lib64 instead of lib.


Entry-point scriptsa
Scripts
bin



"><link rel=icon type=image/x-icon href=https://fgg100y.github.io/favicon.ico><link rel=apple-touch-icon-precomposed href=https://fgg100y.github.io/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=/css/style.min.184a655c5ad8596648622468e6696abf0cf0a2cf8266df17b4f7a36fe9c97551.css integrity="sha256-GEplXFrYWWZIYiRo5mlqvwzwos+CZt8XtPejb+nJdVE="><link rel=stylesheet href=/css/style.min.c4c04b3ef88e3d619ad4c7ee5e03048422bc55c4fefdc1f07657c1133670aa22.css integrity="sha256-xMBLPviOPWGa1MfuXgMEhCK8VcT+/cHwdlfBEzZwqiI="><link rel=stylesheet href=/css/style.min.21c5d8fe0a79d623b0adc1ce4bd4f6dd2c05cd939c9aaaa966ba7186b1464f4d.css integrity="sha256-IcXY/gp51iOwrcHOS9T23SwFzZOcmqqpZrpxhrFGT00="><link rel=stylesheet href=/css/style.min.863b4356f5ce53525ab2482f84c47476c4618984b9726e576c244225ebda1bcc.css integrity="sha256-hjtDVvXOU1JaskgvhMR0dsRhiYS5cm5XbCRCJevaG8w=" crossorigin=anonymous><script src=/js/script.min.08f04d96386c73c9bf4d160333f8f448c05a6e01c06770542ee0e013954ce930.js type=text/javascript integrity="sha256-CPBNljhsc8m/TRYDM/j0SMBabgHAZ3BULuDgE5VM6TA="></script><link rel=stylesheet href=/css/custom.css></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><div class=header-top-left><h1 class="site-title noselect"><a href=/>fgg blog</a></h1><div class=theme-switcher><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sun-high"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828A4 4 0 109.172 9.172a4 4 0 005.656 5.656z"/><path d="M6.343 17.657l-1.414 1.414"/><path d="M6.343 6.343 4.929 4.929"/><path d="M17.657 6.343l1.414-1.414"/><path d="M17.657 17.657l1.414 1.414"/><path d="M4 12H2"/><path d="M12 4V2"/><path d="M20 12h2"/><path d="M12 20v2"/></svg></span></div><script>const STORAGE_KEY="user-color-scheme",defaultTheme="auto";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");function switchTheme(){currentTheme=currentTheme==="dark"?"light":"dark",localStorage&&localStorage.setItem(STORAGE_KEY,currentTheme),document.documentElement.setAttribute("data-theme",currentTheme),changeGiscusTheme(currentTheme),document.body.dispatchEvent(new CustomEvent(currentTheme+"-theme-set"))}const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeGiscusTheme(currentTheme),document.body.dispatchEvent(new CustomEvent(currentTheme+"-theme-set"))};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme==="auto"?(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)):document.documentElement.setAttribute("data-theme",currentTheme),switchButton&&switchButton.addEventListener("click",switchTheme,!1),showContent()});function detectCurrentScheme(){return localStorage!==null&&localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}function changeGiscusTheme(e){function t(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}t({setConfig:{theme:e}})}</script><ul class="social-icons noselect"><li><a href=https://github.com/fgg100y title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-github"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></span></a></li><li><a href=/index.xml title=RSS rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></span></a></li></ul></div><div class=header-top-right></div></div><nav class=noselect><a href=https://fgg100y.github.io/ title>Home</a>
<a href=https://fgg100y.github.io/posts/ title>Posts</a>
<a href=https://fgg100y.github.io/tags/ title>Tags</a>
<a href=https://fgg100y.github.io/about/ title>About</a></nav><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">python_module</h1></header><div class="post-info noselect"><div class="post-date dt-published"><time datetime=2024-07-10>2024-07-10</time></div><a class="post-hidden-url u-url" href=/posts/cs101/python_module/>/posts/cs101/python_module/</a>
<a href=https://fgg100y.github.io/ class="p-name p-author post-hidden-author h-card" rel=me>fmh</a><div class=post-taxonomies><ul class=post-tags><li><a href=/tags/python/>#Python</a></li><li><a href=/tags/modules/>#Modules</a></li></ul></div></div></div><details class="toc noselect"><summary>Table of Contents</summary><div class=inner><nav id=TableOfContents><ul><li><a href=#layout-of-python-installations>Layout of Python installations</a></li><li><a href=#the-interpreter>The interpreter</a></li><li><a href=#the-modules>The modules</a></li><li><a href=#python-virtual-environment>Python virtual environment</a></li><li><a href=#the-module-path>The module path</a></li></ul></nav></div></details><script>var toc=document.querySelector(".toc");toc&&toc.addEventListener("click",function(){event.target.tagName!=="A"&&(event.preventDefault(),this.open?(this.open=!1,this.classList.remove("expanded")):(this.open=!0,this.classList.add("expanded")))})</script><div class="content e-content"><h2 id=layout-of-python-installations><div><a href=#layout-of-python-installations>#
</a>Layout of Python installations</div></h2><p>All paths in the table are relative to the installation root:</p><table><thead><tr><th>Files</th><th>Windows</th><th>Linux and macOS</th><th>Notes</th></tr></thead><tbody><tr><td>Interpreter</td><td>python.exe</td><td>bin/python3.x</td><td></td></tr><tr><td>Standard library</td><td>Lib and DLLs</td><td>lib/python3.x</td><td>Extension modules are located under DLLs on Windows. Fedora places the standard library under lib64 instead of lib.</td></tr><tr><td>Third-party packages</td><td>Lib\site-packages</td><td>lib/python3.x/site-packages</td><td>Debian and Ubuntu put packages in dist-packages. Fedora places extension modules under lib64 instead of lib.</td></tr><tr><td>Entry-point scriptsa</td><td>Scripts</td><td>bin</td><td></td></tr></tbody></table><h2 id=the-interpreter><div><a href=#the-interpreter>#
</a>The interpreter</div></h2><p>The Python interpreter ties the environment to three things:</p><ul><li>A specific version of the Python language (e.g., 2.x.y, 3.x.y)</li><li>A specific implementation of Python (e.g., CPython, PyPy)</li><li>A specific build of the interpreter (e.g., 32bit, 64bit, Intel or Apple)</li></ul><p>Try this command (in Bash) to print metadata complied into the interpreter:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>python3 -m sysconfig
</span></span></code></pre></div><h2 id=the-modules><div><a href=#the-modules>#
</a>The modules</div></h2><p>Modules are containers of Python objects that you load via the <code>import</code> statement.
Modules come in various forms and shapes:</p><ul><li><p>Simple modules
In the simplest case, a <code>module</code> is a single file containing Python source code. The
statement <code>import string</code> executes the code in <em>string.py</em> and binds the result to
the name <code>string</code> in the local scope.</p></li><li><p>Packages
Directories with <em><strong>init</strong>.py</em> files are known as <em>packages</em> which allow you to
organize modules in a hierarchy. The statement <code>import email.message</code> loads the
<code>message</code> module from the <code>email</code> package.</p></li><li><p>Namespace packages
Directories with modules but no <em><strong>init</strong>.py</em> are known as <em>namespace packages</em>. One
may use them to organize modules in a common namespace such as a company name (say
<code>dsta.voicedsp</code> and <code>dsta.vedioprepr</code>). Unlike with regular packages, one can
distribute each module in a namespace package separately.</p></li><li><p>Extension modules
Extension modules such as <code>math</code> module, contain native code compiled from low-level
language like C. They are shared libraries with a special entry-point<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> that lets
you import them as modules from Python. People write them for performance reasons or
to make existing C libraries available as Python modules. Their names end in <code>.pyd</code>
on Windows, <code>.dylib</code> on macOS, and <code>.so</code> on Linux.</p></li><li><p>Built-in modules
Some modules from the standard library, such as <code>sys</code> and <code>builtins</code> modules, are
compiled into the interpreter. The variable <code>sys.builtin_module_names</code> lists all of
these modules.</p></li><li><p>Frozen modules
Some modules from the standard library are written in Python but have their
bytecode<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> embedding in the interpreter. Recent versions of Python freeze every
module that&rsquo;s imported during interpreter startup, such as <code>os</code> and <code>io</code>.</p></li></ul><h2 id=python-virtual-environment><div><a href=#python-virtual-environment>#
</a>Python virtual environment</div></h2><p>Python environments consist of an interpreter and modules. Virtual environments share
the interpreter and the standard library with their parent environment.</p><p><img alt=py-venv src=/posts/cs101/python_module/images/py_python_and_venv.png></p><p>A Python environment can contain only a single version of each third-party package &ndash;
if two projects require different versions of the same package, they can’t be
installed side by side. That’s why it’s considered good practice to install every Python
application, and every project you work on, in a dedicated virtual environment.</p><p>NOTE
<span class=custom-en>The term <em>package</em> carries some ambiguity in the Python world. It refers both to modules
and to the artifacts used for distributing modules (aka <em>distributions</em>).</span></p><h2 id=the-module-path><div><a href=#the-module-path>#
</a>The module path</div></h2><p>It&rsquo;s helpful to look at entries of <code>sys.path</code> to debugg the import error, naturally,
one may wonder where do the entries on <code>sys.path</code> come from at first?</p><p>When the interpreter starts up, it constructs the module path in two steps:</p><ol><li>It builds an initial module path which includes the standard library,</li><li>It imports the <code>site</code> module (from standard library) which extends the module path to
include the site packages from the current environment.</li></ol><p>The locations on the initial module path fall into three categories, and they occur in
this order:</p><ol><li><p>The current directory or the directory containing the Python scripts (if any)
The first item on <code>sys.path</code> can be any of the following:</p><ul><li>If you ran <code>python3 &lt;script></code>, the directory where the script is located</li><li>If you ran <code>python3 -m &lt;module></code>, the current directory</li><li>Otherwise, the empty string, which also denotes the current directory
<strong>Safty issue</strong>: having the working directory on <code>sys.path</code> is quite unsafe, as an
attacker (or you, mistakenly) can override the standard library by placing Python
files in the victim&rsquo;s directory. To avoid this,</li></ul><ol><li>Python-3.11 provides <code>-P</code> option or the PYTHONSAFEPATH variable to omit the
current directory from <code>sys.path</code>;</li><li>Using a virtual environment.</li></ol></li><li><p>The locations in the PYTHONPATH environment variable (if set)
Avoid this mechanism for the same reasons as the current working directory and use a
virtual environment instead.</p></li><li><p>The locations of the standard library
The location of the standard library is not hardcoded in the interpreter. Rather,
Python looks for landmark files on the path to its own executable and uses them to
locate the current environment (<code>sys.prefix</code>) and the Python installation
(<code>sys.base_prefix</code>). One such landmark file is <em>pyvenv.cfg</em>, which marks a virtual
environment and points to its parent installation via the <code>home</code> key. Another
landmark file is <em>os.py</em>, the file containing the standard <code>os</code> module: Python uses
<em>os.py</em> to discover the prefix outside a virtual environment and to locate the
standard library itself.</p></li></ol><p>For more glory details and interesting contents, go to the newest version (2024) of
<em>&ldquo;Hypermodern Python Tooling&rdquo;</em> by Claudio Jolowicz.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>An entry-point script is an executable file in <em>Scripts/</em> (Windows) or <em>bin/</em>
(Linux and macOS) with a single purpose: it launches a Python application by
importing the module with its entry-point function and calling that function.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Bytecode is an intermediate representation of Python code that is
platform-independent and optimized for fast execution. The interpreter compiles pure
Python modules to bytecode when it loads them for the first time. Their names end in
<code>.pyc</code> and they are cached in <code>__pycache__</code> directories.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/cs101/wsl2_and_unicode/>wsl2_and_unicode</a></div><div class="right pagination-item"><a href=/posts/hugo101/2024-07-09-test_custom_font/>Add_and_test_custom_font</a></div></div></main><footer class="common-footer noselect"><div class=common-footer-bottom><div style=display:flex;align-items:center;gap:8px>© fmh, 2024</div><div style=display:flex;align-items:center></div><div>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/Junyi-99/hugo-theme-anubis2>Anubis2</a>.<br></div></div><p class="h-card vcard"><a href=https://fgg100y.github.io/ class="p-name u-url url fn" rel=me>fmh</a></p></footer></div></body></html>