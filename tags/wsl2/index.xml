<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Wsl2 on fgg blog</title><link>/tags/wsl2/</link><description>fgg blog (Wsl2)</description><generator>Hugo -- gohugo.io</generator><language>zh</language><managingEditor>1522009317@qq.com
(fmh)</managingEditor><lastBuildDate>Tue, 16 Jul 2024 21:27:30 +0800</lastBuildDate><atom:link href="/tags/wsl2/index.xml" rel="self" type="application/rss+xml"/><item><title>wsl2_and_unicode</title><link>/posts/wsl2_and_unicode/</link><pubDate>Tue, 16 Jul 2024 21:27:30 +0800</pubDate><author>1522009317@qq.com (fmh)</author><guid>/posts/wsl2_and_unicode/</guid><description>&lt;h2 id="å…³äºŽ-localeunicodejsondump-ä»¥åŠè¢«å†¤æž‰çš„-wsl2" >
&lt;div>
&lt;a href="#%e5%85%b3%e4%ba%8e-localeunicodejsondump-%e4%bb%a5%e5%8f%8a%e8%a2%ab%e5%86%a4%e6%9e%89%e7%9a%84-wsl2">
#
&lt;/a>
å…³äºŽ localeï¼Œunicodeï¼Œjson.dump() ä»¥åŠè¢«å†¤æž‰çš„ WSL2
&lt;/div>
&lt;/h2>
&lt;p>WSL2çš„ &lt;code>locale&lt;/code> ä¸€ç›´æ˜¯é»˜è®¤è®¾ç½®å€¼ &amp;ndash; &amp;ldquo;C.UTF-8&amp;rdquo;ã€‚ç„¶åŽä»Šå¤©ç”¨ python è§£æžè·¯å¾„æ–‡ä»¶ä¸­æ–‡åæ—¶ï¼Œ
æœ€ç»ˆä¿å­˜ä¸‹æ¥çš„ç«Ÿæ˜¯ unicode (&amp;quot;\u5c0f\u6728\u4ed4-\u7761\u7740\u4e862&amp;quot;)ï¼Œè¿™å€’æ˜¯ç ´å¤©è’ç¬¬ä¸€
æ¬¡ç¢°ä¸Š :&amp;rsquo;) ä¸ºäº†çœäº‹ï¼Œå¿…é¡»åŽ»æ‰¾ GPT é˜ä¸‹ã€‚&lt;/p>
&lt;p>æ›´æ–°ï¼šä¸‹æ–‡æ˜¯å®Œå…¨ç»•äº†è¿œè·¯äº†çš„ã€‚é€ æˆä¸Šè¿°æƒ…å†µçš„å®žé™…åŽŸå› åº”è¯¥æ˜¯ï¼š&lt;code>json.dump()&lt;/code> é»˜è®¤å‚æ•°ä¸­çš„
&lt;code>ensure_ascii=True&lt;/code>ï¼Œè¿™å°±å†³å®šäº†å†™å…¥æ–‡ä»¶çš„å­—ç¬¦ä¸ä¼šè¶…å‡ºASCIIå­—ç¬¦é›†ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œæ­£ç¡®çš„ä¿®æ”¹æ–¹å¼ä¸æ˜¯å¤§è´¹å‘¨ç« çš„æ”¹å†™ç³»ç»Ÿ &lt;code>locale&lt;/code> è€Œæ˜¯å°†å‚æ•°æ”¹ä¸º &lt;code>ensure_ascii=False&lt;/code>ã€‚&lt;/p>
&lt;p>å®žé™…ä¸Šï¼Œjson.dump() è¿™éƒ¨åˆ†çš„å‡½æ•°ä¹Ÿæ˜¯ GPT é˜ä¸‹å†™çš„ï¼Œå®ƒç†æ‰€å½“ç„¶åœ°è®¤ä¸ºæ˜¯åœ¨è‹±æ–‡è¯­å¢ƒä¸­ï¼Œä½¿ç”¨
é»˜è®¤çš„å‚æ•°ä¸ä¸ºè¿‡å§ã€‚ðŸ˜‚&lt;/p>
&lt;p>ä½† GPT4o æœ€å…ˆè¦æˆ‘ç¡®è®¤æ˜¯å¦æ˜¯ç»ˆç«¯çš„ç¼–ç é—®é¢˜ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#78787e"># è¿™å°±æ˜¯åŽŸåŽŸæœ¬æœ¬ copy å¾—åˆ°çš„unicodeå­—ç¬¦ä¸²&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff5c57">echo&lt;/span> -e &lt;span style="color:#5af78e">&amp;#34;\u5c0f\u6728\u4ed4-\u7761\u7740\u4e862&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#78787e"># output: å°æœ¨ä»”-ç¡ç€äº†2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…¶æ¬¡ï¼Œä½¿ç”¨ &lt;code>file -bi&lt;/code> å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>file -bi path/to/the/suspicious_file.jsonl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#78787e">#output: application/json; charset=us-ascii&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™å°±æ„å‘³ç€ç¨‹åºåœ¨å†™å…¥æœ¬åœ°æ–‡ä»¶æ—¶ï¼Œåªä½¿ç”¨äº† ascii å­—ç¬¦ã€‚&lt;/p>
&lt;h2 id="å…³äºŽ-escape-sequences-åŠå…¶è§£æž" >
&lt;div>
&lt;a href="#%e5%85%b3%e4%ba%8e-escape-sequences-%e5%8f%8a%e5%85%b6%e8%a7%a3%e6%9e%90">
#
&lt;/a>
å…³äºŽ escape sequences åŠå…¶è§£æž
&lt;/div>
&lt;/h2>
&lt;p>ç„¶åŽ GPT4o å¾ˆè¯¦ç»†çš„å‘ŠçŸ¥åº”è¯¥å¦‚ä½•åœ¨å‘½ä»¤è¡Œç»ˆç«¯ç”Ÿæˆå’Œè®¾ç½® &amp;ldquo;zh_CN.UTF-8&amp;rdquo;ï¼Œä»¥åŠå¦‚ä½•åœ¨ python ä¸­è¿›è¡Œ
è½¬ä¹‰ç³»åˆ—çš„é‡ç¼–ç å’Œè§£ç æ¥æ˜¾ç¤ºä¸­æ–‡å­—ä¸²ï¼Œä½†å°è¯•ä¹‹åŽæ²¡æˆåŠŸã€‚åŽŸæ¥æ˜¯æˆ‘ç†è§£æœ‰è¯¯ã€‚&lt;/p>
&lt;p>GPT4o:
It appears there may be a misunderstanding regarding the purpose and usage of the
unicode-escape encoding. The unicode-escape codec is used to interpret escape sequences
in strings, but it does not process normal Unicode escape sequences (\uXXXX) that are
already present in a Unicode string.&lt;/p>
&lt;p>If you have a string that looks like a Unicode escape sequence and you need to convert
it into actual Unicode characters, you can use the unicode-escape codec. However, your
string needs to be encoded in a way that the codec understands.&lt;/p>
&lt;p>Here&amp;rsquo;s the corrected approach to convert a string with Unicode escape sequences into
actual Chinese characters:&lt;/p>
&lt;pre>&lt;code>Given String: You have a string with Unicode escape sequences.
Decode: Use unicode-escape to decode the string.
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#78787e"># Given string with Unicode escape sequences&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unicode_str &lt;span style="color:#ff6ac1">=&lt;/span> &lt;span style="color:#5af78e">&amp;#34;&lt;/span>&lt;span style="color:#5af78e">\\&lt;/span>&lt;span style="color:#5af78e">u5c0f&lt;/span>&lt;span style="color:#5af78e">\\&lt;/span>&lt;span style="color:#5af78e">u6728&lt;/span>&lt;span style="color:#5af78e">\\&lt;/span>&lt;span style="color:#5af78e">u4ed4-&lt;/span>&lt;span style="color:#5af78e">\\&lt;/span>&lt;span style="color:#5af78e">u7761&lt;/span>&lt;span style="color:#5af78e">\\&lt;/span>&lt;span style="color:#5af78e">u7740&lt;/span>&lt;span style="color:#5af78e">\\&lt;/span>&lt;span style="color:#5af78e">u4e862&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#78787e"># Decode the Unicode escape sequences&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>decoded_str &lt;span style="color:#ff6ac1">=&lt;/span> unicode_str&lt;span style="color:#ff6ac1">.&lt;/span>encode(&lt;span style="color:#5af78e">&amp;#39;utf-8&amp;#39;&lt;/span>)&lt;span style="color:#ff6ac1">.&lt;/span>decode(&lt;span style="color:#5af78e">&amp;#39;unicode-escape&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff5c57">print&lt;/span>(decoded_str)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Explanation&lt;/p>
&lt;pre>&lt;code>The string unicode_str contains Unicode escape sequences.
The encode('utf-8') part ensures the string is in a byte format.
The decode('unicode-escape') part interprets the byte format as Unicode escape sequences and converts them into actual characters.
&lt;/code>&lt;/pre>
&lt;p>This should correctly output the Chinese characters:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>å°æœ¨ä»”-ç¡ç€äº†2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note&lt;/p>
&lt;p>Ensure that your string uses double backslashes (\uXXXX) if you&amp;rsquo;re defining it directly
in the script. This is necessary because a single backslash (\uXXXX) would be
interpreted as an actual Unicode character during the string definition phase, not as an
escape sequence.&lt;/p>
&lt;hr>
&lt;p>ä¸€ç‚¹ç‰¢éªšï¼šåˆå­¦äº†ä¸€äº›æ²¡ç”¨çš„çŸ¥è¯†ï¼Œæ¯•ç«Ÿï¼šé¦–å…ˆä½ ä¸ºä»€ä¹ˆè¦ç”¨WSLè¿™ç ´çƒ‚çŽ©æ„å„¿å‘¢ï¼Ÿï¼Ÿï¼Ÿ&lt;/p>
&lt;p>&lt;del>å› ä¸ºè¿™æœ¬æ¥æ˜¯ä¹°ç»™éžç»ˆç«¯çˆ±å¥½è€…äººå£«ä½¿ç”¨çš„ç”µè„‘&lt;/del>&lt;/p>
&lt;p>&lt;del>å¯äººå®¶æ¯•ç«Ÿä¹Ÿæ²¡æœ‰ç”¨ï¼Œè¿˜æ˜¯ä½ è‡ªä¸ªéœ¸å ç€ã€‚
å‰ä¸ä¹…å‘çŽ°å·¨ç¡¬åˆåœ¨ç³»ç»Ÿæ˜Žç«æ‰§ä»—åœ°æžå·çª¥æ´»åŠ¨ï¼ˆè®¾ç½®&amp;gt;éšç§å’Œå®‰å…¨æ€§&amp;gt;æ´»åŠ¨åŽ†å²è®°å½•ï¼‰å°±ä¿¡èª“æ—¦æ—¦è¯´
ç«‹åˆ»é©¬ä¸Šåˆ»ä¸å®¹ç¼“åºŸæŽ‰è¿™ä¸ªæ¶å¿ƒçŽ©æ„&lt;/del>&lt;/p>
&lt;p>&lt;del>æœ€è¿‘æ¯”è¾ƒå¿™å“”å“©ï¼Œæ–°å®‰è£…çš„2Tç›˜ä¸å¥½æ¸…ç†å§å•¦ï¼Œæ€»è§‰ç€äººå®¶æœ€ç»ˆè¦ç”¨å’•å™œ&lt;/del>&lt;/p>
&lt;p>æœ¬è´¨ä¸Šæ˜¯å› ä¸ºæç€é¼»å­è¿˜èƒ½å‹‰å¼ºç”¨ç”¨ï¼Œä½†ä¼°è®¡ä¹Ÿæ’‘ä¸äº†å¤šä¹…äº†ã€‚&lt;/p>
&lt;p>æ¯•ç«Ÿ Linux æ‰æ˜¯&lt;ruby>æ ¹&lt;rt>root&lt;/rt>&lt;/ruby>ï¼Œæ‰æœ‰&lt;ruby>å®¶&lt;rt>home/&lt;/rt>&lt;/ruby>çš„æ„Ÿè§‰ :)&lt;/p>
&lt;p>æ›´æ–°ï¼šè™½ç„¶å¯¼è‡´æœ¬æ–‡è¯žç”Ÿçš„åŽŸå› å‘ç”Ÿäº†æ ¹æœ¬æ€§æ”¹å˜ï¼ˆè¯¦è§æ–‡ç« å¼€å¤´çš„â€œæ›´æ–°â€å†…å®¹ï¼‰ä½†ä¸å½±å“â€œä¸€ç‚¹ç‰¢
éªšâ€ä¹‹åŽå’Œæœ¬æ›´æ–°ä¹‹å‰çš„ç‰¢éªšå†…å®¹ã€‚&lt;/p></description></item></channel></rss>